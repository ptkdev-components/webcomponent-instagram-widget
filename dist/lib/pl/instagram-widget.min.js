// WebComponent: InstagramWidget 2.9.0 - Collection of WebComponents by Patryk Rzucidlo [@PTKDev] <support@ptkdev.io>
// https://github.com/ptkdev-components/webcomponent-instagram-widget
(function() { class InstagramWidget extends HTMLElement{constructor(){super();const t=document.createElement("template");t.innerHTML='<style id="instagram-widget-style" part="style">#instagram-widget *{margin:0;padding:0;line-height:0}#instagram-widget .instagram-widget-container{text-align:center;justify-content:center;font-weight:500}#instagram-widget .instagram-widget-photos li img{border-radius:5%;background-color:#f8f8ff;object-fit:cover;object-position:50% 50%;max-width:300px;max-height:300px;min-width:80px;min-height:80px;margin:2px}#instagram-widget .instagram-content ul{list-style-type:none;padding-inline-start:0;width:100%}#instagram-widget .instagram-widget-photos li{list-style-type:none;display:inline}#instagram-widget .instagram-widget-error-api,#instagram-widget .instagram-widget-loading,#instagram-widget .instagram-widget-powered,#instagram-widget .instagram-widget-support{font-family:monospace,sans-serif;font-weight:600;padding-top:20px;height:100%;background:linear-gradient(45deg,#f09433 0,#e6683c 25%,#dc2743 50%,#cc2366 75%,#bc1888 100%);background-clip:text;text-fill-color:transparent;-webkit-background-clip:text;-webkit-text-fill-color:transparent;line-height:normal!important}#instagram-widget a.instagram-widget-href::before{content:\'\';position:absolute;left:50%;bottom:-2px;width:100%;height:1px;background-color:#fc2f70;transform-origin:center;transform:translate(-50%,0) scaleX(1);transition:transform .3s ease-in-out}#instagram-widget a.instagram-widget-href:hover::before{transform:translate(-50%,0) scaleX(0)}#instagram-widget a.instagram-widget-href{position:relative;background:linear-gradient(45deg,#f09433 0,#e6683c 25%,#dc2743 50%,#cc2366 75%,#bc1888 100%);background-clip:text;text-fill-color:transparent;-webkit-background-clip:text;-webkit-text-fill-color:transparent;padding-bottom:3px}#instagram-widget .instagram-widget-powered,#instagram-widget .instagram-widget-support{font-size:xx-small}#instagram-widget .instagram-widget-spinner{display:block;transform:translate -50%,-50%;width:50px;height:50px;margin:0 auto}#instagram-widget .instagram-widget-svg{animation:2s linear infinite instagram-widget-svg-animation;max-width:100px}#instagram-widget .instagram-widget-circle{animation:1.4s ease-in-out infinite both instagram-widget-circle-animation;display:block;fill:transparent;stroke:url(#instagram-widget-gradient);stroke-linecap:round;stroke-dasharray:283;stroke-dashoffset:280;stroke-width:8px;-webkit-transform-origin:50% 50%;-ms-transform-origin:50% 50%;transform-origin:50% 50%}@keyframes instagram-widget-svg-animation{0%{transform:rotateZ(0)}100%{transform:rotateZ(360deg)}}@-webkit-keyframes instagram-widget-circle-animation{0%,25%{stroke-dashoffset:280;transform:rotate(0)}50%,75%{stroke-dashoffset:75;transform:rotate(45deg)}100%{stroke-dashoffset:280;transform:rotate(360deg)}}@keyframes instagram-widget-circle-animation{0%,25%{stroke-dashoffset:280;transform:rotate(0)}50%,75%{stroke-dashoffset:75;transform:rotate(45deg)}100%{stroke-dashoffset:280;transform:rotate(360deg)}}</style><div id="instagram-widget" part="main" version="2.9.0">\n\t<div class="instagram-widget-container" part="container">\n\t\t<div class="instagram-widget-content" part="content"></div>\n\t\t<div class="instagram-widget-content-loading" part="content-loading" style="display: block">\n\t\t\t<div class="instagram-widget-spinner">\n\t\t\t\t<svg class="instagram-widget-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t<defs>\n\t\t\t\t\t\t<linearGradient id="instagram-widget-gradient" x1="0%" y1="0%" x2="0%" y2="100%">\n\t\t\t\t\t\t\t<stop offset="0%" stop-color="#f09433" />\n\t\t\t\t\t\t\t<stop offset="20%" stop-color="#e6683c" />\n\t\t\t\t\t\t\t<stop offset="50%" stop-color="#dc2743" />\n\t\t\t\t\t\t\t<stop offset="80%" stop-color="#cc2366" />\n\t\t\t\t\t\t\t<stop offset="100%" stop-color="#bc1888" />\n\t\t\t\t\t\t</linearGradient>\n\t\t\t\t\t</defs>\n\t\t\t\t\t<circle class="instagram-widget-circle" cx="50" cy="50" r="45" />\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t\t<div class="instagram-widget-loading">ładowanie widżetu instagram...</div>\n\t\t\t<div class="instagram-widget-powered"><a class="instagram-widget-href" target="_blank" href="https://github.com/ptkdev-components/webcomponent-instagram-widget">opensource webcomponent</a> powered by <a class="instagram-widget-href" target="_blank" href="https://ptk.dev">@ptkdev</a></div>\n\t\t</div>\n\t\t<div class="instagram-widget-content-fetch-error" part="content-fetch-error" style="display: none">\n\t\t\t<div class="instagram-widget-spinner">\n\t\t\t\t<svg width="100%" height="100%" viewBox="0 0 200 200">\n\t\t\t\t\t<defs>\n\t\t\t\t\t\t<linearGradient id="instagram-logo-gradient1" x1=".8" y1=".8" x2="0">\n\t\t\t\t\t\t\t<stop offset="0" stop-color="#f09433" />\n\t\t\t\t\t\t\t<stop offset="1" stop-color="#bc1888" />\n\t\t\t\t\t\t</linearGradient>\n\t\t\t\t\t\t<radialGradient id="instagram-logo-gradient2" cx=".2" cy="1" r="1.2">\n\t\t\t\t\t\t\t<stop offset="0" stop-color="#f09433" />\n\t\t\t\t\t\t\t<stop offset=".1" stop-color="#e6683c" />\n\t\t\t\t\t\t\t<stop offset=".25" stop-color="#dc2743" />\n\t\t\t\t\t\t\t<stop offset=".35" stop-color="#cc2366" />\n\t\t\t\t\t\t\t<stop offset=".65" stop-color="#bc1888" stop-opacity="0" />\n\t\t\t\t\t\t</radialGradient>\n\t\t\t\t\t\t<rect id="instagram-logo-container" x="0" y="0" width="200" height="200" rx="50" ry="50" />\n\t\t\t\t\t</defs>\n\t\t\t\t\t<use xlink:href="#instagram-logo-container" fill="url(#instagram-logo-gradient1)" />\n\t\t\t\t\t<use xlink:href="#instagram-logo-container" fill="url(#instagram-logo-gradient2)" />\n\t\t\t\t\t<rect x="35" y="35" width="130" height="130" rx="30" ry="30" fill="none" stroke="#fff" stroke-width="13" />\n\t\t\t\t\t<circle cx="100" cy="100" r="32" fill="none" stroke="#fff" stroke-width="13" />\n\t\t\t\t\t<circle cx="140" cy="62" r="9" fill="#fff" />\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t\t<div class="instagram-widget-error-api">błąd podczas pobierania obrazów...</div>\n\t\t\t<div class="instagram-widget-support">sprawdź, czy Twój profil na Instagramie jest publiczny, nie używaj VPN, być może osiągnąłeś dzienny limit API Instagram dla swojego adresu IP: spróbuj ponownie za 48h lub otwórz <a class="instagram-widget-href" target="_blank" href="https://github.com/ptkdev-components/webcomponent-instagram-widget/issues">nowy raport</a> o błędzie na github</div>\n\t\t\t<div class="instagram-widget-powered"><a class="instagram-widget-href" target="_blank" href="https://github.com/ptkdev-components/webcomponent-instagram-widget">opensource webcomponent</a> powered by <a class="instagram-widget-href" target="_blank" href="https://ptk.dev">@ptkdev</a></div>\n\t\t</div>\n\t</div>\n</div>\n',this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(t.content.cloneNode(!0)),this.json=null,this.options_default={username:"@ptkdev","items-limit":"9","image-width":"100%","image-height":"100%",grid:"responsive",cache:"enabled","border-spacing":"2px","border-corners":"5","force-square":"yes",shadows:"disabled","mouse-hover":"disabled","show-title":"enabled"},this.options=Object.create(this.options_default),this.resizeAction=function(t){this.resize(t)}.bind(this)}connectedCallback(){window.addEventListener("resize",this.resizeAction)}buildHTML(){let t=this.json.graphql.user.edge_owner_to_timeline_media.edges,e=[];for(let i=0;i<t.length;i++)e.push({url:`https://www.instagram.com/p/${t[i].node.shortcode}/`,thumbnail:t[i].node.thumbnail_src,display_url:void 0!==t[i].node.display_url?t[i].node.display_url:"",caption:t[i].node.edge_media_to_caption.edges[0]&&void 0!==t[i].node.edge_media_to_caption.edges[0].node.text?t[i].node.edge_media_to_caption.edges[0].node.text:""});let i="";for(let t=0;t<e.length&&t<this.options["items-limit"];t++)i+=`<li class="instagram-widget-li" part="li li-${t}"><a href="${e[t].url}" rel="nofollow external noopener noreferrer" target="_blank" title="${"enabled"===this.options["show-title"]?e[t].caption.substring(0,100).replace(/"/g,""):""}" class="instagram-widget-link" part="link link-${t}"><img width="${this.options["image-width"]}" height="${this.options["image-height"]}" src="${e[t].display_url}" alt="${"enabled"===this.options["show-title"]?e[t].caption.substring(0,100).replace(/"/g,""):""}" loading="lazy" class="instagram-widget-photo" part="photo photo-${t}" /></a></li>`;switch(this.shadowRoot.querySelector(".instagram-widget-content").innerHTML=`<ul class="instagram-widget-photos" part="photos">${i}</ul>`,this.shadowRoot.querySelector(".instagram-widget-content-loading").style.display="none",this.shadowRoot.querySelector(".instagram-widget-content-fetch-error").style.display="none",this.shadowRoot.querySelector(".instagram-widget-content").style.display="block",this.options["mouse-hover"]){case"type1":this.shadowRoot.querySelector("#instagram-widget-style").innerHTML=`${this.shadowRoot.querySelector("#instagram-widget-style").innerHTML}\n\t\t\t\t#instagram-widget .instagram-widget-photo{transition: opacity 0.3s ease-in-out;}\n\t\t\t\t#instagram-widget .instagram-widget-photo:hover{opacity: 0.70;}`}if(""!==this.options.grid&&null!==this.options.grid&&"responsive"!==this.options.grid){let t=this.options.grid.split("x"),e=100/parseInt(t[0]),i=this.shadowRoot.querySelectorAll(".instagram-widget-photos img");for(let s=0;s<i.length;s++){switch(i[s].removeAttribute("width"),i[s].style.width=`calc(${e}% - (${this.options["border-spacing"]} * (${parseInt(t[0])} * 2)))`,i[s].style.maxWidth="none",i[s].style.maxHeight="none",i[s].style.borderRadius=`${this.options["border-corners"]}%`,i[s].style.margin=this.options["border-spacing"],this.options.shadows){case"type1":i[s].style.boxShadow="0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24)";break;case"type2":i[s].style.boxShadow="0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22)";break;case"type3":i[s].style.boxShadow="0 19px 38px rgba(0,0,0,0.30), 0 15px 12px rgba(0,0,0,0.22)"}"yes"===this.options["force-square"]&&(i[s].removeAttribute("height"),i[s].style.height=`${this.shadowRoot.querySelector(".instagram-widget-photos img").clientWidth}px`)}}else{let t=this.shadowRoot.querySelectorAll(".instagram-widget-photos img");for(let e=0;e<t.length;e++){switch(t[e].style.borderRadius=`${this.options["border-corners"]}%`,t[e].style.margin=this.options["border-spacing"],this.options.shadows){case"type1":t[e].style.boxShadow="0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24)";break;case"type2":t[e].style.boxShadow="0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22)";break;case"type3":t[e].style.boxShadow="0 19px 38px rgba(0,0,0,0.30), 0 15px 12px rgba(0,0,0,0.22)"}"yes"===this.options["force-square"]&&(t[e].removeAttribute("height"),t[e].style.maxHeight="none",t[e].style.height=`${this.shadowRoot.querySelector(".instagram-widget-photos img").clientWidth}px`)}}}resize(){let t=this.shadowRoot.querySelectorAll(".instagram-widget-photos img");for(let e=0;e<t.length;e++)"yes"===this.options["force-square"]&&(t[e].style.height=`${this.shadowRoot.querySelector(".instagram-widget-photos img").clientWidth}px`)}apiFetch(){this.options.username=this.options.username.replace("@","");let t=`https://images${~~(3333*Math.random())}-focus-opensocial.googleusercontent.com/gadgets/proxy?container=none&url=${encodeURI(`https://www.instagram.com/${this.options.username}`)}`;fetch(t,{method:"GET",mode:"cors",redirect:"follow",cache:null===this.options.cache||"enabled"===this.options.cache?"force-cache":"default"}).then((function(t){return t.text()})).then(function(t){this.json=JSON.parse(t.match(new RegExp(/<script type="text\/javascript">window\._sharedData = (.*);<\/script>/))[1]).entry_data.ProfilePage[0],window.localStorage.setItem(`instagram-widget-json-${this.options.username}`,JSON.stringify(this.json)),this.buildHTML()}.bind(this)).catch(function(){if(null!=window.localStorage.getItem(`instagram-widget-json-${this.options.username}`)&&""!=window.localStorage.getItem(`instagram-widget-json-${this.options.username}`))try{this.json=JSON.parse(window.localStorage.getItem(`instagram-widget-json-${this.options.username}`)),this.buildHTML()}catch{this.shadowRoot.querySelector(".instagram-widget-content").style.display="none",this.shadowRoot.querySelector(".instagram-widget-content-loading").style.display="none",this.shadowRoot.querySelector(".instagram-widget-content-fetch-error").style.display="block"}else this.shadowRoot.querySelector(".instagram-widget-content").style.display="none",this.shadowRoot.querySelector(".instagram-widget-content-loading").style.display="none",this.shadowRoot.querySelector(".instagram-widget-content-fetch-error").style.display="block"}.bind(this))}static get observedAttributes(){return["username","items-limit","grid","image-width","image-height","border-spacing","border-corners","force-square","mouse-hover","shadows","show-title","cache"]}attributeChangedCallback(t,e,i){if(e!==i)switch(this.options[t]=null===i||""===i?this.options_default[t]:i,t){case"username":this.shadowRoot.querySelector(".instagram-widget-content").style.display="none",this.shadowRoot.querySelector(".instagram-widget-content-loading").style.display="block",this.shadowRoot.querySelector(".instagram-widget-content-fetch-error").style.display="none",this.apiFetch();break;default:null!==this.json&&this.buildHTML()}}disconnectedCallback(){window.removeEventListener("resize",this.resizeAction)}}window.customElements.define("instagram-widget",InstagramWidget); })();